{% include 'navbar.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h3 class="mb-4">Add New Product</h3>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Subcategory -->
        <div class="mb-3">
            <label for="subcategory" class="form-label">Subcategory</label>
            <select class="form-select" name="subcategory" id="subcategory" required>
                <option value="" selected disabled>Select a subcategory</option>
                {% for sub in subcategories %}
                    <option value="{{ sub.id }}">{{ sub.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Name -->
        <div class="mb-3">
            <label for="name" class="form-label">Product Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
        </div>

        <!-- Description -->
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
        </div>

        <!-- Price -->
        <div class="mb-3">
            <label for="price" class="form-label">Price (â‚¹)</label>
            <input type="number" step="0.01" class="form-control" id="price" name="price" required>
        </div>
<div class="mb-3">
    <label for="image" class="form-label">Main Product Image</label>
    <input type="file" class="form-control" id="image" name="image" required>
</div>
        <!-- Stock -->
        <div class="mb-3">
            <label for="stock" class="form-label">Stock</label>
            <input type="number" class="form-control" id="stock" name="stock" required>
        </div>



        <!-- Size -->
       <div class="mb-3">
    <label class="form-label">Size</label><br>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="XS" id="sizeXS">
        <label class="form-check-label" for="sizeXS">Extra Small (XS)</label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="S" id="sizeS">
        <label class="form-check-label" for="sizeS">Small (S)</label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="M" id="sizeM">
        <label class="form-check-label" for="sizeM">Medium (M)</label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="L" id="sizeL">
        <label class="form-check-label" for="sizeL">Large (L)</label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="XL" id="sizeXL">
        <label class="form-check-label" for="sizeXL">Extra Large (XL)</label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="size" value="XXL" id="sizeXXL">
        <label class="form-check-label" for="sizeXXL">Double Extra Large (XXL)</label>
    </div>
</div>


      <div class="mb-3">
    <label class="form-label">Colors</label>
    <div id="colorContainer">
        <div class="d-flex mb-2 color-row">
            <input type="text" name="color[]" class="form-control me-2" placeholder="Enter Color (e.g., Red)">
            <button type="button" class="btn btn-danger ms-2 remove-row">X</button>
        </div>
    </div>
    <button type="button" id="addColor" class="btn btn-primary btn-sm mt-2">+ Add More Colors</button>
</div>


        <!-- Material -->
        <div class="mb-3">
            <label for="material" class="form-label">Material/Fabric</label>
            <input type="text" class="form-control" id="material" name="material" placeholder="e.g., Cotton, Silk">
        </div>



        <!-- Gender -->
        <div class="mb-3">
            <label for="gender" class="form-label">Ideal For</label>
            <select class="form-select" name="gender" id="gender">
                <option value="men">Men</option>
                <option value="women">Women</option>
                <option value="kids">Kids</option>
            </select>
        </div>

        <!-- Status -->
        <div class="mb-3">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" name="status" id="status" required>
                <option value="active" selected>Active</option>
                <option value="inactive">Inactive</option>
            </select>
        </div>

        <!-- GST -->
        <div class="mb-3">
            <label for="gst_percentage" class="form-label">GST (%)</label>
            <input type="number" step="0.01" class="form-control" id="gst_percentage" name="gst_percentage" value="0.00">
        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-primary">Add Product</button>
    </form>
</div>
{% endblock %}
<script>
document.getElementById("addColor").addEventListener("click", function () {
    let container = document.getElementById("colorContainer");
    let newRow = document.createElement("div");
    newRow.classList.add("d-flex", "mb-2", "color-row");
    newRow.innerHTML = `
        <input type="text" name="color[]" class="form-control me-2" placeholder="Enter Color (e.g., Blue)">
        <button type="button" class="btn btn-danger ms-2 remove-row">X</button>
    `;
    container.appendChild(newRow);
});
document.addEventListener("click", function (e) {
    if (e.target && e.target.classList.contains("remove-row")) {
        e.target.closest(".color-row").remove();
    }
});
</script>